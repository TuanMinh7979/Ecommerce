<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultrag.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin/admin_layout.html}">
<head>
    <meta charset="UTF-8">
    <title>Product Image manage</title>
    <th:block layout:fragment="addcss">
        <link rel="stylesheet" th:href="@{/resource/plugins/rich-text-editor/richtext.min.css}">
        <link rel="stylesheet" th:href="@{/resource/css/admin/product/add-edit.css}">
    </th:block>
</head>
<body>
<div class="content-wrapper" layout:fragment="content">
    <div class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1 class="m-0">Add Product</h1>
                </div><!-- /.col -->
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a th:href="@{/admin/product/}">Product index</a></li>

                    </ol>
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <br/>
    <div class="col-12">
        <button id="addNewImageExtraBtn" class="btn btn-info ">Add new extra image</button>
    </div>
    <br/>
    <div id="imageWrapper" class="row col-12">
        <th:block th:if="${product.id!=null} and ${mainImage!=null}">
            <div th:id="${mainImage.id}" class="img-wrapper col-6">
                <span>Main</span>

                <span class="float-right image-color-picker">
                    <input name="mainColor" type="text" class="color-text" th:value="${mainImage.color}">
                     <span class="colorpicker__span"><i class="colorpicker__i fas fa-eye-dropper"></i>
                     </span>
                </span>
                <div class="image-preview saved-image-preview">
                    <th:block th:if="${mainImage!=null}">
                        <img th:src="${mainImage.link}" alt="alt" class="image-preview__img"/>
                    </th:block>

                    <th:block th:if="${mainImage==null}">
                        <img th:src="${product.defaultImage}" alt="alt" class="image-preview__img"/>

                    </th:block>

                </div>

                <button class="float-right" id="selectnone-btn">Select default</button>
            </div>
        </th:block>

        <th:block th:if="${product.id==null} or ${mainImage==null}">
            <div class="img-wrapper col-6">
                <span>Main</span>
                <span class="float-right image-color-picker">

                    <input name="mainColor" type="text" class="color-text" value="no color" >
                     <span class="colorpicker__span"><i class="colorpicker__i fas fa-eye-dropper"></i></span>
                </span>

                <div class="image-preview saved-image-preview">
                    <th:block th:if="${product.mainImageLink!=null}">
                        <img th:src="${product.mainImageLink}" alt="alt" class="image-preview__img"/>
                    </th:block>

                    <th:block th:if="${product.mainImageLink==null}">
                        <img th:src="${product.defaultImage}" alt="alt" class="image-preview__img"/>

                    </th:block>

                </div>

                <button class="float-right" id="selectnone-btn">Select default</button>
            </div>
        </th:block>


        <th:block th:if="${images != null}" th:each="imagei : ${images}">

            <div th:id="${imagei.id}" class="img-wrapper col-6">

                <span>Extra</span>
                <span class="float-right image-color-picker">
                    <input name="extraColor" type="text" class="color-text" th:value="${imagei.color}">
                    <span class="colorpicker__span"><i class="fas fa-eye-dropper"></i></span></span>

                <div class="image-preview saved-image-preview">

                    <i class="close-i fas fa-times"></i>
                    <img th:src="${imagei.link}" alt="alt" class="image-preview__img"/>
                </div>


            </div>


        </th:block>


    </div>

    <!--    Fragment-->

    <div th:replace="comment_fragment/commonColorPicker :: set-common-color"></div>
    <!--    Fragment-->
</div>

<th:block layout:fragment="addscript">

    <script th:inline="javascript">    // Enable Thymeleaf inlining
    var defaultImage = [[${product.defaultImage}]]; 	// Behaves just like in HTML
    var productId = [[${product.id}]]; 	// Behaves just like in HTML
    var productCategoryId = [[${product.category.id}]];
    </script>

    <script th:src="@{/resource/plugins/rich-text-editor/jquery.richtext.min.js}"></script>
    <script th:src="@{/resource/js/admin/product/add-edit.js}"></script>
    <script th:src="@{/resource/js/admin/category-product/category-product.js}"></script>
</th:block>
</body>
</html>